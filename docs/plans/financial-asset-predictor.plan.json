{
  "metadata": {
    "version": "1.0",
    "created_at": "2026-01-10T00:00:00Z",
    "prd_sources": ["docs/prd/2026-01-10-financial-asset-predictor.md"],
    "title": "Financial Asset Predictor Runner",
    "summary": "Consolidate stock-predictor and crypto-predictor into unified financial-asset-predictor runner, implement story deduplication, and build test data injection framework",
    "goals": [
      "Merge stock + crypto into a single financial-asset-predictor runner",
      "Delete unused crypto-predictor and market-predictor directories",
      "Implement story deduplication to prevent duplicate signals",
      "Build test data injection framework for pipeline testing",
      "Establish clean pattern for future prediction domains"
    ],
    "scope": {
      "in_scope": [
        "Runner consolidation (stock + crypto merge)",
        "Story deduplication layers",
        "Test data injection framework",
        "Conversational test data builder UI"
      ],
      "out_of_scope": [
        "Building betting market predictor (future)",
        "Changing core LangGraph pipeline logic",
        "Modifying base prediction runner class"
      ]
    },
    "risks": [
      {
        "risk": "Breaking existing predictions with old runner types",
        "mitigation": "Add backwards compatibility aliases in runner-factory"
      },
      {
        "risk": "Test data polluting production metrics",
        "mitigation": "Strict is_test_data filtering in all queries"
      }
    ]
  },
  "summary": "Consolidate stock-predictor and crypto-predictor into unified financial-asset-predictor runner, implement story deduplication, and build test data injection framework",
  "phases": [
    {
      "id": "phase-1",
      "label": "Phase 1: Runner Consolidation",
      "status": "pending",
      "progress": 0,
      "started_at": null,
      "completed_at": null,
      "steps": [
        {
          "id": "step-1-1",
          "action": "Rename stock-predictor directory to financial-asset-predictor using git mv",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": [],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "git mv apps/api/src/agent2agent/runners/prediction/stock-predictor apps/api/src/agent2agent/runners/prediction/financial-asset-predictor"
        },
        {
          "id": "step-1-2",
          "action": "Rename stock-predictor-runner.service.ts to financial-asset-predictor-runner.service.ts",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-1"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/financial-asset-predictor-runner.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-3",
          "action": "Update class name and @RegisterRunner decorator with new type 'financial-asset-predictor' and supportedTargetTypes",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-2"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/financial-asset-predictor-runner.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Change StockPredictorRunnerService to FinancialAssetPredictorRunnerService, update RegisterRunner with type: 'financial-asset-predictor', supportedTargetTypes: ['stock', 'etf', 'crypto', 'forex']"
        },
        {
          "id": "step-1-4",
          "action": "Copy crypto-specific tools (binance, coingecko, whale-alerts, defillama, etherscan) into financial-asset-predictor/tools/",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-1"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/tools/binance.tool.ts",
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/tools/coingecko.tool.ts",
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/tools/whale-alerts.tool.ts",
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/tools/defillama.tool.ts",
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/tools/etherscan.tool.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-5",
          "action": "Update getTools() to include both stock and crypto data sources",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-3", "step-1-4"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/financial-asset-predictor-runner.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Add binance, coingecko, whale-alerts, defillama, etherscan to getTools() alongside yahoo-finance, alpha-vantage, sec-filings, etc."
        },
        {
          "id": "step-1-6",
          "action": "Copy crypto-specific specialists (onchain-analyst, defi-analyst) to financial-asset-predictor/specialists/",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-1"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/specialists/onchain-analyst.ts",
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/specialists/defi-analyst.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-7",
          "action": "Implement conditional specialist logic - only add onchain-analyst and defi-analyst for crypto instruments",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-5", "step-1-6"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/financial-asset-predictor-runner.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Add hasCryptoInstruments() helper and update getSpecialistContexts() to conditionally include crypto specialists"
        },
        {
          "id": "step-1-8",
          "action": "Implement unified risk profiles supporting both traditional (conservative, moderate, aggressive) and crypto (hodler, trader, degen) terminology",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-3"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/financial-asset-predictor-runner.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-9",
          "action": "Update financial-asset-predictor.module.ts with new class name and exports",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-3"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/financial-asset-predictor.module.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-10",
          "action": "Add backwards compatibility aliases in runner-factory.service.ts for 'stock-predictor' and 'crypto-predictor'",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-9"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/runner-factory.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Add resolveRunnerType() with aliases mapping old types to 'financial-asset-predictor'"
        },
        {
          "id": "step-1-11",
          "action": "Update prediction.module.ts to import FinancialAssetPredictorModule and remove CryptoPredictorModule and MarketPredictorModule",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-9"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/prediction.module.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-12",
          "action": "Update runner.registry.ts with new 'financial-asset-predictor' type",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-3"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/runner.registry.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-13",
          "action": "Update index.ts barrel exports for financial-asset-predictor",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-9"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/index.ts",
            "apps/api/src/agent2agent/runners/prediction/index.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-1-14",
          "action": "Delete crypto-predictor directory",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-11", "step-1-13"],
          "deliverables": [],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "rm -rf apps/api/src/agent2agent/runners/prediction/crypto-predictor"
        },
        {
          "id": "step-1-15",
          "action": "Delete market-predictor directory",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-11", "step-1-13"],
          "deliverables": [],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "rm -rf apps/api/src/agent2agent/runners/prediction/market-predictor"
        },
        {
          "id": "step-1-16",
          "action": "Create database migration to update agent records with new runner type",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-10"],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000001_update_runner_types.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "UPDATE agents SET runner_type = 'financial-asset-predictor' WHERE runner_type IN ('stock-predictor', 'crypto-predictor')"
        },
        {
          "id": "step-1-17",
          "action": "Update unit tests for financial-asset-predictor-runner.service",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-1-7", "step-1-8"],
          "deliverables": [
            "apps/api/src/agent2agent/runners/prediction/financial-asset-predictor/__tests__/financial-asset-predictor-runner.service.spec.ts"
          ],
          "validation_checkpoint": "checkpoint-1",
          "human_checkpoint_id": null
        }
      ]
    },
    {
      "id": "phase-2",
      "label": "Phase 2: Story Deduplication",
      "status": "pending",
      "progress": 0,
      "started_at": null,
      "completed_at": null,
      "steps": [
        {
          "id": "step-2-1",
          "action": "Create database migration for signal_fingerprints table with title_normalized, key_phrases, fingerprint_hash columns",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": [],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000002_signal_fingerprints.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Create prediction.signal_fingerprints table with indexes on target_id and fingerprint_hash"
        },
        {
          "id": "step-2-2",
          "action": "Add title_normalized, key_phrases, fingerprint_hash columns to source_seen_items table",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-1"],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000002_signal_fingerprints.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-3",
          "action": "Create check_content_hash_for_target SQL function for cross-source hash check",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-1"],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000002_signal_fingerprints.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-4",
          "action": "Add deduplication metrics columns to source_crawls table (duplicates_exact, duplicates_cross_source, duplicates_fuzzy_title, duplicates_phrase_overlap)",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-1"],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000002_signal_fingerprints.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-5",
          "action": "Create SignalFingerprintRepository service for signal fingerprint CRUD operations",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-1"],
          "deliverables": [
            "apps/api/src/prediction-runner/repositories/signal-fingerprint.repository.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-6",
          "action": "Enhance ContentHashService with findSimilarByTitle and findByPhraseOverlap methods",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-5"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/content-hash.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-7",
          "action": "Create DeduplicationService implementing 4-layer deduplication (exact hash, cross-source, fuzzy title, key phrase overlap)",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-5", "step-2-6"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/deduplication.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Implement processItem() flow with 4 deduplication layers as specified in PRD"
        },
        {
          "id": "step-2-8",
          "action": "Update SourceSeenItemRepository with hasBeenSeenForTarget method for cross-source checks",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-3"],
          "deliverables": [
            "apps/api/src/prediction-runner/repositories/source-seen-item.repository.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-9",
          "action": "Add crawl_config JSONB schema support for fuzzy_dedup_enabled, title_similarity_threshold, phrase_overlap_threshold, cross_source_dedup",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-7"],
          "deliverables": [
            "apps/api/src/prediction-runner/types/crawl-config.types.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-10",
          "action": "Integrate DeduplicationService into source crawler pipeline",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-7", "step-2-9"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/source-crawler.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-2-11",
          "action": "Write unit tests for DeduplicationService covering all 4 layers",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-2-7"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/__tests__/deduplication.service.spec.ts"
          ],
          "validation_checkpoint": "checkpoint-2",
          "human_checkpoint_id": null
        }
      ]
    },
    {
      "id": "phase-3",
      "label": "Phase 3: Test Data Injection Framework",
      "status": "pending",
      "progress": 0,
      "started_at": null,
      "completed_at": null,
      "steps": [
        {
          "id": "step-3-1",
          "action": "Create database migration to add is_test_data and test_scenario_id columns to ALL prediction tables",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": [],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000003_test_data_markers.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Add columns to signals, predictions, predictors, outcomes, learning_queue, etc. with partial indexes for is_test_data = TRUE"
        },
        {
          "id": "step-3-2",
          "action": "Create test_scenarios table with RLS for multi-tenant isolation",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-1"],
          "deliverables": [
            "apps/api/supabase/migrations/20260110000003_test_data_markers.sql"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-3-3",
          "action": "Create TestScenarioRepository for test scenario CRUD operations",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-2"],
          "deliverables": [
            "apps/api/src/prediction-runner/repositories/test-scenario.repository.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-3-4",
          "action": "Create TestDataInjectorService with generic injectIntoTable and tier-specific injectors",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-3"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/test-data-injector.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Implement injectSignals, injectContexts, injectPredictors, injectPredictions, injectOutcomes, injectMissedOpportunities, injectLearningItems, injectStrategies"
        },
        {
          "id": "step-3-5",
          "action": "Create TestDataGeneratorService for generating realistic mock data",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-4"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/test-data-generator.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Implement generateMockArticles, generateMockSignals, generateMockPredictionsWithOutcomes"
        },
        {
          "id": "step-3-6",
          "action": "Add scenario runner methods to TestDataInjectorService for executing tiers against test data",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-4"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/test-data-injector.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Implement runSignalDetection, runPredictionGeneration, runEvaluation, runMissedOpportunityDetection, runLearningProcessor"
        },
        {
          "id": "step-3-7",
          "action": "Add cleanupScenario and cleanupAllTestData methods to TestDataInjectorService",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-4"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/test-data-injector.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-3-8",
          "action": "Create TestDataFilter interface and update all repository methods to support includeTestData and testScenarioId filters",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-1"],
          "deliverables": [
            "apps/api/src/prediction-runner/types/test-data-filter.types.ts",
            "apps/api/src/prediction-runner/repositories/signal.repository.ts",
            "apps/api/src/prediction-runner/repositories/prediction.repository.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Default behavior excludes test data; explicit flag required to include"
        },
        {
          "id": "step-3-9",
          "action": "Create test-data-builder A2A agent for conversational test data building",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-4", "step-3-5"],
          "deliverables": [
            "apps/api/src/agent2agent/agents/test-data-builder/",
            "apps/api/src/agent2agent/agents/test-data-builder/test-data-builder-runner.service.ts",
            "apps/api/src/agent2agent/agents/test-data-builder/test-data-builder.module.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Supports actions: build, execute, cleanup, list-scenarios, run-tier"
        },
        {
          "id": "step-3-10",
          "action": "Write unit tests for TestDataInjectorService",
          "agent": "api-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-3-6", "step-3-7"],
          "deliverables": [
            "apps/api/src/prediction-runner/services/__tests__/test-data-injector.service.spec.ts"
          ],
          "validation_checkpoint": "checkpoint-3",
          "human_checkpoint_id": null
        }
      ]
    },
    {
      "id": "phase-4",
      "label": "Phase 4: Conversational Test Data Builder UI",
      "status": "pending",
      "progress": 0,
      "started_at": null,
      "completed_at": null,
      "steps": [
        {
          "id": "step-4-1",
          "action": "Create testDataBuilderStore Pinia store for frontend state management",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": [],
          "deliverables": [
            "apps/web/src/stores/testDataBuilder.store.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Store scenario config, pendingData (sources, signals, predictors, predictions, outcomes, learningItems), conversationHistory, executedScenarioId"
        },
        {
          "id": "step-4-2",
          "action": "Create TestDataBuilderView.vue main page component",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-1"],
          "deliverables": [
            "apps/web/src/views/prediction/TestDataBuilderView.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-3",
          "action": "Create TestDataConversation.vue component for AI chat interface",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-1"],
          "deliverables": [
            "apps/web/src/components/prediction/test-lab/TestDataConversation.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-4",
          "action": "Create TestDataPreview.vue component for displaying pending test data JSON",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-1"],
          "deliverables": [
            "apps/web/src/components/prediction/test-lab/TestDataPreview.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-5",
          "action": "Create ScenarioList.vue component for listing active and past test scenarios",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-1"],
          "deliverables": [
            "apps/web/src/components/prediction/test-lab/ScenarioList.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-6",
          "action": "Create TestLabDashboard.vue component showing test data stats and quick actions",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-2"],
          "deliverables": [
            "apps/web/src/components/prediction/test-lab/TestLabDashboard.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-7",
          "action": "Create GuidedWorkflows.vue component for pre-built test scenarios",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-2"],
          "deliverables": [
            "apps/web/src/components/prediction/test-lab/GuidedWorkflows.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Pre-built workflows: Test Analyst Accuracy, Test Full Pipeline, Test Deduplication, Test Conflicting Signals, Test Missed Opportunities, Test Learning Loop"
        },
        {
          "id": "step-4-8",
          "action": "Create LiveMonitor.vue component for real-time test data processing visualization",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-2"],
          "deliverables": [
            "apps/web/src/components/prediction/test-lab/LiveMonitor.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-9",
          "action": "Create testDataService for A2A agent communication",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-1"],
          "deliverables": [
            "apps/web/src/services/test-data.service.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Wraps calls to test-data-builder A2A agent with actions: build, execute, cleanup, list-scenarios, run-tier"
        },
        {
          "id": "step-4-10",
          "action": "Add Test Mode toggle to prediction dashboard for viewing test data",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-2"],
          "deliverables": [
            "apps/web/src/views/prediction/PredictionDashboardView.vue"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null,
          "details": "Toggle that shows test data with visual distinction; prevents test data from appearing in production views by default"
        },
        {
          "id": "step-4-11",
          "action": "Add routes for Test Lab view",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-2"],
          "deliverables": [
            "apps/web/src/router/index.ts"
          ],
          "validation_checkpoint": null,
          "human_checkpoint_id": null
        },
        {
          "id": "step-4-12",
          "action": "Add export/import JSON functionality for portable test datasets",
          "agent": "web-architecture-agent",
          "status": "pending",
          "progress": 0,
          "started_at": null,
          "completed_at": null,
          "depends_on": ["step-4-4"],
          "deliverables": [
            "apps/web/src/services/test-data-export.service.ts"
          ],
          "validation_checkpoint": "checkpoint-4",
          "human_checkpoint_id": null
        }
      ]
    }
  ],
  "checkpoints": [
    {
      "id": "checkpoint-1",
      "label": "Phase 1 Quality Gates",
      "description": "Verify runner consolidation: build passes, tests pass, old runner type aliases work",
      "status": "pending",
      "triggered_after": ["step-1-17"],
      "validation_steps": [
        "npm run build passes in apps/api",
        "npm run test passes for financial-asset-predictor tests",
        "Old runner types ('stock-predictor', 'crypto-predictor') resolve to 'financial-asset-predictor'",
        "Crypto instruments activate crypto-specific specialists",
        "Stock instruments do not activate crypto specialists"
      ]
    },
    {
      "id": "checkpoint-2",
      "label": "Phase 2 Quality Gates",
      "description": "Verify story deduplication: all 4 layers work correctly, metrics captured",
      "status": "pending",
      "triggered_after": ["step-2-11"],
      "validation_steps": [
        "npm run build passes in apps/api",
        "npm run test passes for deduplication tests",
        "Exact hash match prevents duplicates",
        "Cross-source dedup catches same story from different outlets",
        "Fuzzy title matching catches headline variations",
        "Key phrase overlap catches paraphrased stories",
        "Dedup metrics recorded in source_crawls"
      ]
    },
    {
      "id": "checkpoint-3",
      "label": "Phase 3 Quality Gates",
      "description": "Verify test data injection framework: data isolated, cleanup works, tiers can process test data",
      "status": "pending",
      "triggered_after": ["step-3-10"],
      "validation_steps": [
        "npm run build passes in apps/api",
        "npm run test passes for test-data-injector tests",
        "Test data has is_test_data=true marker",
        "Production queries exclude test data by default",
        "cleanupScenario removes only test data",
        "Tier runners process test data correctly"
      ]
    },
    {
      "id": "checkpoint-4",
      "label": "Phase 4 Quality Gates",
      "description": "Verify Test Lab UI: conversational builder works, execute inserts data, cleanup works",
      "status": "pending",
      "triggered_after": ["step-4-12"],
      "validation_steps": [
        "npm run build passes in apps/web",
        "npm run lint passes in apps/web",
        "Test Lab view accessible via route",
        "Conversational builder generates valid JSON",
        "Execute action inserts data with test markers",
        "Cleanup action removes test data",
        "Test Mode toggle shows/hides test data in dashboard"
      ]
    }
  ],
  "dependencies": {
    "phase-2": [],
    "phase-3": [],
    "phase-4": ["phase-3"]
  },
  "execution_strategy": {
    "mode": "mixed",
    "parallel_phases": ["phase-1", "phase-2", "phase-3"],
    "notes": "Phases 1, 2, and 3 can run in parallel as they have no dependencies. Phase 4 depends on Phase 3 completing first."
  }
}
