---
description: "Critical database safety guidelines - never reset database without explicit user permission"
globs: ["**/*.sql", "**/*.ts", "**/*.js", "**/migrations/**/*", "**/seed/**/*"]
alwaysApply: true
---

# Database Safety Guidelines

## ğŸš¨ CRITICAL RULE: Database Reset Protection

**NEVER reset, drop, or truncate the database unless the user EXPLICITLY requests it.**

### **Forbidden Actions Without Explicit Permission:**
- âŒ Running database reset scripts
- âŒ Dropping databases or schemas
- âŒ Truncating tables
- âŒ Running destructive migrations
- âŒ Executing `supabase db reset`
- âŒ Executing `npm run db:reset` or similar commands
- âŒ Clearing production or development data

### **What "Explicit Permission" Means:**
- âœ… User says: "Reset the database"
- âœ… User says: "Drop and recreate the database"
- âœ… User says: "I want to start fresh with the database"
- âŒ User says: "Fix the database" (NOT explicit permission to reset)
- âŒ User says: "Something is wrong with the data" (NOT explicit permission to reset)

### **Before ANY Destructive Database Operation:**
1. **Ask for confirmation** if the intent is unclear
2. **Explain what will be lost** (data, configurations, etc.)
3. **Wait for explicit approval** before proceeding
4. **Suggest non-destructive alternatives** when appropriate

### **Safe Alternatives to Suggest:**
- Running specific migrations
- Adding/modifying individual tables or columns
- Fixing data through targeted UPDATE queries
- Creating backups before changes
- Using database transactions for testing

### **When Database Issues Arise:**
- **First**: Diagnose the actual problem
- **Second**: Suggest targeted fixes
- **Third**: Offer backup/restore options
- **Last Resort**: Only suggest reset if explicitly necessary and approved

## Why This Rule Exists

Database resets are destructive operations that can:
- Lose valuable development data
- Break active testing workflows
- Require time-consuming re-seeding
- Disrupt collaborative work
- Eliminate important debugging information

**Default to preservation, not destruction.**
