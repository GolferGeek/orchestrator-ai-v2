# Production Environment Configuration for Ollama Model Management
# Copy to .env and adjust values for your environment

# ===== OLLAMA CONFIGURATION =====
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_API_KEY=

# ===== MEMORY MANAGEMENT =====
# Maximum memory allocation for models (in GB)
# Adjust based on your system's available RAM:
# - 16GB system: 12GB
# - 32GB system: 24GB  
# - 64GB system: 48GB
# - 96GB+ system: 72GB
MAX_MODEL_MEMORY_GB=24

# ===== ALERT THRESHOLDS =====
# Response time threshold (milliseconds)
# Alert if model response time exceeds this value
ALERT_RESPONSE_TIME_MS=10000

# Error rate threshold (0.0 to 1.0)
# Alert if model error rate exceeds this percentage
ALERT_ERROR_RATE=0.1

# Memory usage threshold (0.0 to 1.0) 
# Alert if memory usage exceeds this percentage
ALERT_MEMORY_USAGE=0.9

# Model unavailable time threshold (milliseconds)
# Alert if model is unavailable for longer than this
ALERT_UNAVAILABLE_TIME_MS=300000

# Consecutive failures threshold
# Alert after this many consecutive health check failures
ALERT_CONSECUTIVE_FAILURES=3

# ===== MONITORING CONFIGURATION =====
# Health check interval (milliseconds)
# How often to check model health (default: 120000 = 2 minutes)
HEALTH_CHECK_INTERVAL_MS=120000

# Memory check interval (milliseconds)  
# How often to check memory pressure (default: 60000 = 1 minute)
MEMORY_CHECK_INTERVAL_MS=60000

# System check interval (milliseconds)
# How often to check overall system health (default: 300000 = 5 minutes)
SYSTEM_CHECK_INTERVAL_MS=300000

# ===== PERFORMANCE TUNING =====
# Model loading timeout (milliseconds)
# Maximum time to wait for a model to load
MODEL_LOAD_TIMEOUT_MS=300000

# Health check timeout (milliseconds)
# Maximum time to wait for health check response
HEALTH_CHECK_TIMEOUT_MS=30000

# Health check cache duration (milliseconds)
# How long to cache health check results
HEALTH_CHECK_CACHE_MS=5000

# Maximum concurrent model loads
MAX_CONCURRENT_LOADS=2

# ===== DATABASE CONFIGURATION =====
# Supabase configuration (if using database features)
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=

# ===== LOGGING =====
# Log level: error, warn, log, debug, verbose
LOG_LEVEL=log

# Enable debug logging for memory management
DEBUG_MEMORY_MANAGEMENT=false

# Enable debug logging for model monitoring  
DEBUG_MODEL_MONITORING=false

# ===== OPERATIONAL SETTINGS =====
# Enable automatic memory optimization
ENABLE_AUTO_MEMORY_OPTIMIZATION=true

# Enable model preloading on startup
ENABLE_MODEL_PRELOADING=true

# Enable health monitoring on startup
ENABLE_HEALTH_MONITORING=true

# Preload three-tier models on startup
PRELOAD_THREE_TIER_MODELS=true

# ===== ADVANCED SETTINGS =====
# Memory pressure thresholds (0.0 to 1.0)
MEMORY_PRESSURE_MEDIUM=0.6
MEMORY_PRESSURE_HIGH=0.8
MEMORY_PRESSURE_CRITICAL=0.95

# Three-tier model protection time (milliseconds)
# Three-tier models won't be unloaded unless unused for this long
THREE_TIER_PROTECTION_TIME_MS=1800000

# Model usage tracking window (milliseconds)
# How long to track model usage for optimization decisions
MODEL_USAGE_WINDOW_MS=3600000

# ===== SECURITY =====
# API rate limiting (requests per minute)
API_RATE_LIMIT=1000

# Enable API authentication (if implemented)
ENABLE_API_AUTH=false

# API key for production endpoints (if authentication enabled)
PRODUCTION_API_KEY=

# ===== N8N CONFIGURATION (Production) =====
# n8n workflow automation - Production instance (port 9050)
GENERIC_TIMEZONE=America/Chicago
TZ=America/Chicago
N8N_PROTOCOL=http
N8N_PROD_ENCRYPTION_KEY=<generate-different-32-byte-base64-value>
N8N_PROD_DB_SCHEMA=n8n_prod

# ===== INTEGRATION =====
# Webhook URL for critical alerts (optional)
ALERT_WEBHOOK_URL=

# Slack webhook for notifications (optional)  
SLACK_WEBHOOK_URL=

# Email configuration for alerts (optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
ALERT_EMAIL_TO=

# ===== EXAMPLE CONFIGURATIONS =====

# --- 16GB Development System ---
# MAX_MODEL_MEMORY_GB=12
# ALERT_RESPONSE_TIME_MS=15000
# PRELOAD_THREE_TIER_MODELS=false

# --- 32GB Production System ---  
# MAX_MODEL_MEMORY_GB=24
# ALERT_RESPONSE_TIME_MS=10000
# PRELOAD_THREE_TIER_MODELS=true

# --- 96GB High-Performance System ---
# MAX_MODEL_MEMORY_GB=72
# ALERT_RESPONSE_TIME_MS=5000
# MAX_CONCURRENT_LOADS=4
# PRELOAD_THREE_TIER_MODELS=true
